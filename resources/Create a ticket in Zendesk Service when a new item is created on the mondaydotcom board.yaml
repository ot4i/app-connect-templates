$integration: http://ibm.com/appconnect/integration/v2/integrationFile
integration:
  type: trigger-action
  trigger-interfaces:
    trigger-interface-1:
      connector-type: mondaydotcom
      type: event-trigger
      triggers:
        CREATED:
          input-context:
            data: Item
          assembly:
            $ref: '#/integration/assemblies/assembly-1'
          options:
            board_id: '3309856828'
            parentFilter:
              board_id: '3309856828'
            subscription: {}
  action-interfaces:
    action-interface-1:
      type: api-action
      business-object: Ticket
      connector-type: zendeskservice
      actions:
        CREATE: {}
    action-interface-2:
      type: api-action
      business-object: message
      connector-type: slack
      actions:
        CREATE: {}
    action-interface-3:
      type: api-action
      business-object: Item
      connector-type: mondaydotcom
      actions:
        UPDATEALL: {}
  assemblies:
    assembly-1:
      assembly:
        execute:
          - create-action:
              name: Zendesk Service Create ticket
              target:
                $ref: '#/integration/action-interfaces/action-interface-1'
              map:
                mappings:
                  - comment:
                      mappings:
                        - body:
                            template: '{{$Trigger.response_column_values.text1}}'
                  - description:
                      template: '{{$Trigger.response_column_values.text1}}'
                  - priority:
                      template: '{{$Trigger.response_column_values.status2}}'
                  - subject:
                      template: '{{$Trigger.response_column_values.text}}'
                  - tags:
                      expression: monday.com
                $map: http://ibm.com/appconnect/map/v1
                input:
                  - variable: Trigger
                    $ref: '#/trigger/payload'
                  - variable: flowDetails
                    $ref: '#/flowDetails'
          - update-action:
              name: monday.com Update item
              target:
                $ref: '#/integration/action-interfaces/action-interface-3'
              map:
                mappings:
                  - board_id:
                      template: '3309856828'
                  - change_multiple_column_values:
                      mappings:
                        - column_values:
                            mappings:
                              - name:
                                  template: '{{$ZendeskServiceCreateticket.id}}'
                $map: http://ibm.com/appconnect/map/v1
                input:
                  - variable: Trigger
                    $ref: '#/trigger/payload'
                  - variable: ZendeskServiceCreateticket
                    $ref: >-
                      #/node-output/Zendesk Service Create
                      ticket/response/payload
                  - variable: flowDetails
                    $ref: '#/flowDetails'
              filter:
                where:
                  and:
                    - id: '{{$Trigger.id}}'
                    - board_id: '3309856828'
                input:
                  - variable: Trigger
                    $ref: '#/trigger/payload'
                  - variable: ZendeskServiceCreateticket
                    $ref: >-
                      #/node-output/Zendesk Service Create
                      ticket/response/payload
                  - variable: flowDetails
                    $ref: '#/flowDetails'
          - create-action:
              name: Slack Send message
              target:
                $ref: '#/integration/action-interfaces/action-interface-2'
              map:
                mappings:
                  - OBJECT_ID:
                      template: C03FZSRMWRJ
                  - OBJECT_NAME:
                      template: channel
                  - text:
                      template: >-
                        {{$ZendeskServiceCreateticket.id}} created.....against
                        item id  {{$Trigger.id}}.......................
                        {{$Trigger}}
                $map: http://ibm.com/appconnect/map/v1
                input:
                  - variable: Trigger
                    $ref: '#/trigger/payload'
                  - variable: ZendeskServiceCreateticket
                    $ref: >-
                      #/node-output/Zendesk Service Create
                      ticket/response/payload
                  - variable: mondaycomUpdateitem
                    $ref: '#/node-output/monday.com Update item/response/payload'
                  - variable: mondaycomUpdateitemMetadata
                    $ref: '#/node-output/monday.com Update item/response'
                  - variable: flowDetails
                    $ref: '#/flowDetails'
  name: Create a ticket in Zendesk Service when a new item is created on the mondaydotcom board
  description: >-
    Use this template to create a ticket in Zendesk Service when a new item is created on the mondaydotcom board. This flow helps you to keep the ticket information in sync.
models: {}
